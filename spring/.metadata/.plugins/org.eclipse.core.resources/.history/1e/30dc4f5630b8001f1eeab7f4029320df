<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="edu.kh.admin.main.model.mapper.AdminMapper">

  <!-- 관리자 로그인 -->
  <select id="login">
  	SELECT MEMBER_NO, MEMBER_EMAIL, MEMBER_NICKNAME, MEMBER_PW, AUTHORITY
	FROM "MEMBER"
	WHERE MEMBER_EMAIL = #{memberEmail}
	AND MEMBER_DEL_FL = 'N'
	AND AUTHORITY = 2
  </select>
  
  <!-- 탈퇴한 회원 목록 조회. -->
  <select id="selectWithdrawnMemberList">
  	SELECT MEMBER_NO, MEMBER_EMAIL, MEMBER_NICKNAME
  	FROM "MEMBER"
  	WHERE MEMBER_DEL_FL = 'Y'
  	ORDER BY MEMBER_NO DESC
  </select>
  
  <!-- 탈퇴한 회원 복구. -->
  <update id="restoreMember">
  	UPDATE MEMBER SET
  	MEMBER_DEL_FL = 'N'
  	WHERE MEMBER_NO = #{memberNo}
  	AND MEMBER_DEL_FL = 'Y'
  </update>
  
  <select id="selectDeleteBoardList">
  	SELECT BOARD_NO, BOARD_TITLE, BOARD_NAME, MEMBER_NICKNAME
  	FROM BOARD
  	JOIN BOARD_TYPE USING (BOARD_CODE)
  	JOIN MEMBER USING (MEMBER_NO)
  	WHERE BOARD_DEL_FL = 'Y'
  	ORDER BY BOARD_NO DESC
  </select>
  
  <!-- 삭제된 게시글 복구. -->
  <update id="restoreBoard">
  	
  </update>
  
</mapper>
